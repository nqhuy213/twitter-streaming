{"version":3,"sources":["../../src/stream-service/app.js"],"names":["express","require","registerStream","registerSocket","deleteAllRules","process","env","NODE_ENV","config","createApp","app","get","req","res","send","startApp","server","listen","STREAM_PORT","console","log"],"mappings":";;AAAA,IAAMA,OAAO,GAAGC,OAAO,CAAC,SAAD,CAAvB;;AACA,IAAMC,cAAc,GAAGD,OAAO,CAAC,kBAAD,CAA9B;;AACA,IAAME,cAAc,GAAGF,OAAO,CAAC,kBAAD,CAA9B;;AACA,eAA2BA,OAAO,CAAC,aAAD,CAAlC;AAAA,IAAQG,cAAR,YAAQA,cAAR;;AAEA,IAAIC,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CN,EAAAA,OAAO,CAAC,QAAD,CAAP,CAAkBO,MAAlB;AACD;;AAED,SAASC,SAAT,GAAqB;AACnB,MAAMC,GAAG,GAAGV,OAAO,EAAnB;AACAU,EAAAA,GAAG,CAACC,GAAJ,CAAQ,GAAR,EAAa,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzBA,IAAAA,GAAG,CAACC,IAAJ,CAAS,4BAAT;AACD,GAFD;AAGA,SAAOJ,GAAP;AACD;;AAED,SAASK,QAAT,GAAoB;AAClB;AACAX,EAAAA,cAAc,GAFI,CAIlB;;AACA,MAAMM,GAAG,GAAGD,SAAS,EAArB;AACA,MAAMO,MAAM,GAAGN,GAAG,CAACO,MAAJ,CAAWZ,OAAO,CAACC,GAAR,CAAYY,WAAvB,EAAoC,YAAM;AACvDC,IAAAA,OAAO,CAACC,GAAR,iDAC2Cf,OAAO,CAACC,GAAR,CAAYY,WADvD;AAGD,GAJc,CAAf;AAKAf,EAAAA,cAAc,CAACa,MAAD,EAASN,GAAT,CAAd;AACAR,EAAAA,cAAc,CAACQ,GAAD,CAAd;AACD;;AAEDK,QAAQ","sourcesContent":["const express = require(\"express\");\r\nconst registerStream = require(\"./registerStream\");\r\nconst registerSocket = require(\"./registerSocket\");\r\nconst { deleteAllRules } = require(\"../libs/api\");\r\n\r\nif (process.env.NODE_ENV === \"development\") {\r\n  require(\"dotenv\").config();\r\n}\r\n\r\nfunction createApp() {\r\n  const app = express();\r\n  app.get(\"/\", (req, res) => {\r\n    res.send(\"Stream service is running.\");\r\n  });\r\n  return app;\r\n}\r\n\r\nfunction startApp() {\r\n  //for the sake of testing, delete all stream rules in twitter every time the stream restarts\r\n  deleteAllRules();\r\n\r\n  //init app\r\n  const app = createApp();\r\n  const server = app.listen(process.env.STREAM_PORT, () => {\r\n    console.log(\r\n      `Server is running on http://localhost:${process.env.STREAM_PORT}`\r\n    );\r\n  });\r\n  registerSocket(server, app);\r\n  registerStream(app);\r\n}\r\n\r\nstartApp();\r\n"],"file":"app.js"}