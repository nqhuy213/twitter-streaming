{"version":3,"sources":["../../../src/libs/database/registerDatabase.js"],"names":["mongoose","require","StreamModel","HistoryModel","createDatabase","Stream","History","registerDatabase","app","cb","console","log","connect","process","env","MONGODB_URI","then","db","err","message","module","exports"],"mappings":";;AAAA,IAAMA,QAAQ,GAAGC,OAAO,CAAC,UAAD,CAAxB;;AACA,IAAMC,WAAW,GAAGD,OAAO,CAAC,iBAAD,CAA3B;;AACA,IAAME,YAAY,GAAGF,OAAO,CAAC,kBAAD,CAA5B;;AAEA,SAASG,cAAT,GAA0B;AACxB,SAAO;AACLC,IAAAA,MAAM,EAAEH,WADH;AAELI,IAAAA,OAAO,EAAEH;AAFJ,GAAP;AAID;;AAED,SAASI,gBAAT,CAA0BC,GAA1B,EAA+BC,EAA/B,EAAmC;AACjCC,EAAAA,OAAO,CAACC,GAAR,CAAY,+BAAZ;AACAX,EAAAA,QAAQ,CACLY,OADH,CACWC,OAAO,CAACC,GAAR,CAAYC,WADvB,EAEGC,IAFH,CAEQ,YAAM;AACVN,IAAAA,OAAO,CAACC,GAAR,CAAY,6BAAZ;AACA,QAAMM,EAAE,GAAGb,cAAc,EAAzB;AACAI,IAAAA,GAAG,CAACS,EAAJ,GAASA,EAAT;;AACA,QAAIR,EAAJ,EAAQ;AACNA,MAAAA,EAAE;AACH;AACF,GATH,WAUS,UAACS,GAAD,EAAS;AACdR,IAAAA,OAAO,CAACC,GAAR,CAAYO,GAAG,CAACC,OAAhB;AACA,UAAMD,GAAN;AACD,GAbH;AAcD;;AAEDE,MAAM,CAACC,OAAP,GAAiBd,gBAAjB","sourcesContent":["const mongoose = require(\"mongoose\");\r\nconst StreamModel = require(\"./models/stream\");\r\nconst HistoryModel = require(\"./models/history\");\r\n\r\nfunction createDatabase() {\r\n  return {\r\n    Stream: StreamModel,\r\n    History: HistoryModel,\r\n  };\r\n}\r\n\r\nfunction registerDatabase(app, cb) {\r\n  console.log(\"---- Connecting Database ----\");\r\n  mongoose\r\n    .connect(process.env.MONGODB_URI)\r\n    .then(() => {\r\n      console.log(\"---- MongoDb Connected ----\");\r\n      const db = createDatabase();\r\n      app.db = db;\r\n      if (cb) {\r\n        cb();\r\n      }\r\n    })\r\n    .catch((err) => {\r\n      console.log(err.message);\r\n      throw err;\r\n    });\r\n}\r\n\r\nmodule.exports = registerDatabase;\r\n"],"file":"registerDatabase.js"}